 <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wireless project</title>
    <link rel="stylesheet" href="projectcss.css">
</head>
<body>
    <header class="main-header">
        <div class="container">
            <div class="logo">
                <h1>CalcWee</h1>
            </div>
            <nav class="nav-links">
                <a href="#" id="defaultOpen" onclick="openTab(event, 'basic')">Basic</a>
                <a href="#" onclick="openTab(event, 'advanced')">Advanced</a>
                <a href="#" onclick="openTab(event, 'power')">Power</a>
                <a href="#" onclick="openTab(event, 'throughput')">Throughput</a>
                <a href="#" onclick="openTab(event, 'design')">Design</a>
                <a href="#" onclick="openTab(event, 'support')">Support</a>
            </nav>
            <div class="cta-buttons">
                <button class="btn register">Register for free</button>
            </div>
        </div>
        <div class="header-content">
            <h2>Online Calculator for Wireless and Mobile Networks</h2>
            <p>easy and fast way to find all the needed numbers and Calculations.</p>
            <div class="buttons">
                <button class="btn primary">Basic reads</button>
                <button class="btn secondary">Watch lecture</button>
            </div>
        </div>
    </header>
    <div id="basic" class="tab-content active">
    <section class="calculator-section" id="basic">
        <h2>Basic Calculations</h2>
        <div class="calc-container">
            <div class="sampler calc-item">
                <h3>sampling frequency calculator</h3>
                <label for="bandwidth">please enter the Bandwidth</label>
                <input type="text"  id="bandwidth">
                <label for="unit1">select unit</label>
                <select name="units" id="unit1">
                    <option value="Hz">HZ</option>
                    <option value="KHz">KHz</option>
                    <option value="MHz">MHz</option>
                </select>
                
                
                <button onclick="calculate_sampler()">Calculate</button>
                <div class="sample_result calc-result" id="sample_result">
                    
                </div>
            </div>
            <div class="quantizer calc-item">
                    <h3>quantizer level calculator</h3>
                    <label for="num_of_bits">insert Number of bits</label>
                    <input type="text"  id="num_of_bits">
                    <button onclick="calculate_quantizer()">Calculate</button>
                    <div class="quantizer_result calc-result" id="quantizer_result">
                        
                    </div>
                
            </div>
            <div class="source_encoder calc-item">
                    <h3>bit rate at output of source encoder calculator</h3>
                    <label for="compression_rate">insert encoder compression rate: </label>
                    <input type="text"  id="compression_rate">
                    <button onclick="calculate_Sencoder_result()">Calculate</button>
                    <div class="Sencoder_result calc-result" id="Sencoder_result">
                        
                    </div>
                
            </div>
            <div class="channel_encoder calc-item">
                    <h3>bit rate at output of channel encoder calculator</h3>
                    <label for="Cencoder_rate">insert Channel encoder rate: </label>
                    <input type="text"  id="Cencoder_rate">
                    <button onclick="calculate_Cencoder_result()">Calculate</button>
                    <div class="Cencoder_result calc-result" id="Cencoder_result">
                        
                    </div>
                
            </div>
            <div class="interleaver calc-item">
                <h3>Interleaver</h3>
                <p>the bit rate of the interleaver is equal to bit rate of channel encoder output</p>
                <button onclick="calculate_Cencoder_result()">Calculate</button>
                    <div class="Cencoder_result calc-result" id="Cencoder_result">
                        
                    </div>
            </div>
        </div>
    </section>
    </div>

    <div id="advanced" class="tab-content ">
    <section class="calculator-section" id="advanced">
        <h2>Advanced Calculations</h2>
        <div class="calc-container">
            <div class="resource_element calc-item">
                    <h3>resource element number of bits calculator</h3>
                    <label for="QAM">enter Number of QAM modulation</label>
                    <input type="text"  id="QAM">
                    <button onclick="calculate_resource_element()">Calculate</button>
                    <div class="resource_result calc-result" id="resource_result">
                        
                    </div>
                
            </div>

            <div class="OFDM_symbol calc-item">
                    <h3>OFDM symbol number of bits calculator</h3>
                    <label for="OFDM_bandwidth">enter OFDM bandwidth</label>
                    <input type="number"  id="OFDM_bandwidth" min="0">
                    <label for="2">select unit</label>
                    <select name="unit" id="2">
                        <option value="Hz">HZ</option>
                        <option value="KHz">KHz</option>
                        <option value="MHz">MHz</option>
                    </select>
                    <label for="subCarrier">enter subCarrier spacing</label>
                    <input type="number"  id="subCarrier" min="0">
                    <button onclick="calculate_OFDM_symbol()">Calculate</button>
                    <div class="OFDM_symbol_result calc-result" id="OFDM_symbol_result">
                        
                    </div>
                
            </div>
            <div class="OFDM_block calc-item">
                    <h3>OFDM resource block number of bits calculator</h3>
                    <label for="num_of_symbol"> enter Number of OFDM symbols</label>
                    <input type="text"  id="num_of_symbol">
                    <button onclick="calculate_OFDM_resource_block()">Calculate</button>
                    <div class="OFDM_block_result calc-result" id="OFDM_block_result">
                        
                    </div>
                
            </div>
            <div class="Max_trans_rate calc-item">
                    <h3>user Maximum transmission rate calculator</h3>
                    <label for="num_of_blocks">enter Number of resource block</label>
                    <input type="text"  id="num_of_blocks">

                    <label for="block_duration">enter Duration of resource block</label>
                    <input type="text"  id="block_duration">

                    <button onclick="calculate_max_trans_rate()">Calculate</button>
                    <div class="Max_trans_rate_result calc-result" id="Max_trans_rate_result">
                        
                    </div>
                
            </div>

        

        </div>
    </section>
    </div>



    <div id="power" class="tab-content ">
        <section class="calculator-section">
            <h2>Power calculation</h2>
            <p>please enter the following values:</p>
            <div class="calc-container">
            
            <div class="calc-item">
            <label for="lp">enter the path loss</label>
            <input type="text" id="lp">
            <label for="unit1">select unit</label> <!--power units-->
                <select class="unit_selector" name="units" id="unit1">
                    <option value="nu">no unit</option>
                    <option value="dB">dB</option>
                    <option value="dBm">dBm</option>
                </select>
            </div>

            <div class="calc-item">
            <label for="freq">enter Frequency</label>
            <input type="text" id="freq">
            <label for="1">select unit</label>
                <select name="units" id="1">
                    <option value="Hz">HZ</option>
                    <option value="KHz">KHz</option>
                    <option value="MHz">MHz</option>
                </select>
            </div>

            <div class="calc-item">
            <label for="gt">enter transmitted antenna gain</label>
            <input type="text" id="gt">
            <label for="unit2">select unit</label> <!--power units-->
                <select class="unit_selector" name="units" id="unit2">
                    <option value="nu">no unit</option>
                    <option value="dB">dB</option>
                    <option value="dBm">dBm</option>
                </select>
            </div>

            <div class="calc-item">
            <label for="gr">enter recived antenna gain</label>
            <input type="text" id="gr">
            <label for="unit3">select unit</label> <!--power units-->
                <select class="unit_selector" name="units" id="unit3">
                    <option value="nu">no unit</option>
                    <option value="dB">dB</option>
                    <option value="dBm">dBm</option>
                </select>
            </div>

            <div class="calc-item">
            <label for="r">enter data rate</label>
            <input type="text" id="r">
            <label for="dataR_unit">select unit</label> <!--power units-->
                <select class="unit_selector" name="units" id="dataR_unit">
                    <option value="nu">no unit</option>
                    <option value="dB">dB</option>
                    <option value="dBm">dBm</option>
                </select>
            </div>

            <div class="calc-item">
            <label for="lf">enter antenna feed line loss</label>
            <input type="text" id="lf">
            <label for="unit4">select unit</label> <!--power units-->
                <select class="unit_selector" name="units" id="unit4">
                    <option value="nu">no unit</option>
                    <option value="dB">dB</option>
                    <option value="dBm">dBm</option>
                </select>
            </div>

            <div class="calc-item">
            <label for="lo">enter other losses</label>
            <input type="text" id="lo">
            <label for="unit5">select unit</label> <!--power units-->
                <select class="unit_selector" name="units" id="unit5">
                    <option value="nu">no unit</option>
                    <option value="dB">dB</option>
                    <option value="dBm">dBm</option>
                </select>
            </div>

            <div class="calc-item">
            <label for="lf_margin">enter the fade margin</label>
            <input type="text" id="lf_margin">
            <label for="unit6">select unit</label> <!--power units-->
                <select class="unit_selector" name="units" id="unit6">
                    <option value="nu">no unit</option>
                    <option value="dB">dB</option>
                    <option value="dBm">dBm</option>
                </select>
            </div>

            <div class="calc-item">
            <label for="ar">enter the reciver amplifier gain</label>
            <input type="text" id="ar">
            <label for="unit7">select unit</label> <!--power units-->
                <select class="unit_selector" name="units" id="unit7">
                    <option value="nu">no unit</option>
                    <option value="dB">dB</option>
                    <option value="dBm">dBm</option>
                </select>
            </div>

            <div class="calc-item">
            <label for="ns_total">enter the noise figure total</label>
            <input type="text" id="ns_total">
            <label for="unit8">select unit</label> <!--power units-->
                <select class="unit_selector" name="units" id="unit8">
                    <option value="nu">no unit</option>
                    <option value="dB">dB</option>
                    <option value="dBm">dBm</option>
                </select>
            </div>

            <div class="calc-item">
            <label for="ns_tem">enter the noise temperature</label>
            <input type="text" id="ns_tem">
            <label for="temp">select unit</label> <!--power units-->
                <select class="unit_selector" name="units" id="temp">
                    <option value="k">Kelvin</option>
                    <option value="c">celcuis</option>
                    <option value="f">Fahrenheit</option>
                </select>
            </div>

            <div class="calc-item">
            <label for="M">enter the link margin</label>
            <input type="text" id="M">
            <label for="unit9">select unit</label> <!--power units-->
                <select class="unit_selector" name="units" id="unit9">
                    <option value="nu">no unit</option>
                    <option value="dB">dB</option>
                    <option value="dBm">dBm</option>
                </select>
            </div>

            <div class="calc-item">
            <label for="m_type">please select the modulation type </label>
                <div>
                    <input id="8_PSK" type="radio" name="OS" value="8_PSK">
                    <label for="8_PSK">8_PSK</label>
                </div>
                <div>
                    <input id="BPSK/QPSK" type="radio" name="OS" value="BPSK/QPSK">
                    <label for="BPSK/QPSK">BPSK/QPSK</label>
                </div>

                <div>
                    <input id="16_PSK" type="radio" name="OS" value="16_PSK">
                    <label for="16_PSK">16_PSK</label>
                </div>
            </div>

            <div class="calc-item">
            <label for="BER">enter the maximum bit error rate</label>
            <input type="text" id="BER">
            </div>

            <div class="calc-item">
            <button onclick="calculate_receiver_power()"> Calculate power</button>
            </div>
            </div>
            <div class="power_result calc-result" id="power_result">
            </div>

        </section>        
    </div>


        <div id="throughput" class="tab-content">
            <section class="calculator-section">
                <h2>Throughput calculation</h2>
                <p>please enter the following values:</p>
                <div class="calc-container">
                    <div class="calc-item">
                        <label for="trans_rate">enter the data transmission rate</label>
                        <input type="text" id="trans_rate">
                        <label for="th_trans_rate">select unit</label>
                        <select name="unit" id="th_trans_rate">
                            <option value="Hz">HZ</option>
                            <option value="KHz">KHz</option>
                            <option value="MHz">MHz</option>
                        </select>
                    </div>
                
                    <div class="calc-item">
                        <label for="Access_techn">please select the modulation type </label>
                            <div>
                                <input id="pure_aloha" type="radio" name="Access_techn" value="pure_aloha">
                                <label for="pure_aloha">pure ALOHA</label>
                            </div>
                            <div>
                                <input id="slotted_aloha" type="radio" name="Access_techn" value="slotted_aloha">
                                <label for="slotted_aloha">slotted ALOHA</label>
                            </div>
            
                            <div>
                                <input id="uns_nonp_CSMA" type="radio" name="Access_techn" value="uns_nonp_CSMA">
                                <label for="uns_nonp_CSMA">unslotted nonpersistenet CSMA</label>
                            </div>
                        </div>
            
                    <div class="calc-item">
                        <label for="signal_prog">enter the maximum signal progation time from one node to another</label>
                        <input type="text" id="signal_prog">

                    </div>

                    <div class="calc-item">
                        <label for="f_size">enter the frame size</label>
                        <input type="text" id="f_size">
                        <label for="th_frame_size">select unit</label>
                        <select name="unit" id="th_frame_size">
                            <option value="Hz">HZ</option>
                            <option value="KHz">KHz</option>
                            <option value="MHz">MHz</option>
                        </select>
                    </div>

                    <div class="calc-item">
                        <label for="g_framerate">enter the frame rate</label>
                        <input type="text" id="g_framerate">
                    </div>
                    <div class="calc-item">
                        <button onclick="calculate_throughput()"> Calculate throughput</button>
                        </div>
                    

                </div>
                <div class="throughput_result calc-result" id="throughput_result">
                </div>


            </section>

        </div>

        <div class="tab-content" id="design">

        <section class="calculator-section">
            <h2>Desing cellular system</h2>
            <p>please enter the following values:</p>
            <div class="calc-container">
                <ul class="textBoxHolder">
                    <li>
                        <label for="time/carrier">Enter time slot per carrier</label>
                        <input type="number" 
                        id="time/carrier" name="time/carrier" 
                        placeholder="time slots per carrier" class="textBox" min="0">
                    </li>
                    
                    <li>
                        <label for="cityA">Enter the area of City A</label>
                        <input type="number" 
                        id="cityA" name="cityA" 
                        placeholder="area of the city in km squared" class="textBox" min="0">
                    </li>
                    
                    <li>
                        <label for="subscribers">Enter the number of subscribers</label>
                        <input type="number"
                        id="subscribers" name="subscribers"
                        placeholder="number of subscribers" class="textBox" min="0">
                    </li>
                    
                    <li>
                        <label for="H">Enter subscribers average number of calls per day (call/day)</label>
                        <input type="number"
                        id="H" name="H"
                        placeholder="subscribers average number of calls per day (call/day)" class="textBox" min="0">
                    </li>
                    
                    <li>
                        <label for="limda">Enter average duration per call (min/call)</label>
                        <input type="number"
                        id="limda" name="limda"
                        placeholder="average duration per call (min/call)" class="textBox" min="0">
                    </li> 
        
                    <li>
                        <label for="PdropcallL">Enter the probability of call being dropped</label>
                        <input type="number"
                        id="PdropcallL" name="PdropcallL"
                        placeholder="probability of call being dropped (GOS)" class="textBox">
                    </li> 
        
                    <li>
                        <label for="SIR">Enter the signal to interference ratio</label>
                        <input type="number"
                        id="SIR" name="SIR"
                        placeholder="SIR" class="textBox">
                    </li> 
    
                    <li>
                        <label for="dnode">Enter the distance at which power were misured at</label>
                        <input type="number"
                        id="dnode" name="dnode"
                        placeholder="d node:distance at which power were misured" class="textBox" min="0">
                        <label for="unit_dnoce">select unit</label>
                        <select class="unit_selector" name="units" id="unit_dnode">
                            <option value="m">m</option>
                            <option value="km">km</option>
                            <option value="cm">cm</option>
                        </select>
                    </li> 
        
                    <li>
                        <label for="P/dnode">Enter the power misured at d node</label>
                        <input type="number"
                        id="P/dnode" name="P/dnode"
                        placeholder="power misured at d node" class="textBox">
                        <label for="unit_P/dnode">select unit</label>
                        <select class="unit_selector" name="units" id="unit_P/dnode">
                            <option value="nu">no unit</option>
                            <option value="dB">dB</option>
                            <option value="dBm">dBm</option>
                        </select>
                    </li> 
        
                    <li>
                        <label for="Rsensitivity">Enter the receiver sensitivity</label>
                        <input type="number"
                        id="Rsensitivity" name="Rsensitivity"
                        placeholder="receiver sensitivity in micro watts" class="textBox">
                    </li> 
        
                    <li>
                        <label for="n">Enter the path loss exponent</label>
                        <input type="number"
                        id="n" name="n"
                        placeholder="path loss exponent" class="textBox">
                    </li> 
                    
                    <li>
                        <label for="co-channel">Enter the number of co-channel interfering cells</label>
                        <input type="number"
                        id="co-channel" name="co-channel"
                        placeholder="number of co-channel interfering cells" class="textBox" min="0">
                    </li> 
                </ul>

                <button type="button" id="button1" onclick="solve()">
                    calculate</button>
                 
                 <ul class="textBoxHolder" id="answers">
                     <li>
                         <p id="A">Maximum distance between transmitter and receiver for reliable communication</p>
                     </li>
         
                     <li>
                         <p id="B">Maximum cell size assuming hexagonal cells</p>
                     </li>
         
                     <li>
                         <p id="C">The number of cells in the service area</p>
                     </li>
         
                     <li>
                         <p id="D">Traffic load in the whole cellular system in Erlangs</p>
                     </li>
         
                     <li>
                         <p id="E">Traffic load in each cell in Erlangs</p>
                     </li> 
                     
                     <li>
                         <p id="F">Number of cells in each cluster</p>
                     </li>
         
                     <li>
                         <p id="G">Minimum number of carriers needed (in the whole system) to achieve the required 
                             Quality of Service</p>
                     </li>
         
                     <li>
                         <p id="H">Minimum number of carriers needed (in the whole system)</p>
                     </li>
                 </ul>
                 <i class="fa-solid fa-house icon" id="home_icon"></i>
            
            </div>

        </section>
    </div>
    

    <script>
        let sampling_freq = 0; // Define sampling_freq in a broader scope
        let output_rate = 0;
        let OFDM_num_bit_symbol=0;
        let num_of_bits_block=0;
        function calculate_sampler() {
            const bandwidthValue = parseFloat(document.getElementById('bandwidth').value);
            const unitValue = document.getElementById('unit1').value;
            if (!isNaN(bandwidthValue)) {
                sampling_freq = 2 * bandwidthValue; // Assign value to the broader scope variable
                document.getElementById('sample_result').textContent = `the sampler frequency fs=: ${sampling_freq} ${unitValue}`;
            } else {
                document.getElementById('sample_result').textContent = 'Please enter a valid number and select a unit';
            }
        }

        function calculate_quantizer() {
            const quant_level = parseFloat(document.getElementById('num_of_bits').value);
            if (!isNaN(quant_level)) {
                const result = Math.pow(2, quant_level);
                document.getElementById('quantizer_result').textContent = `quantizer level= : ${result} Level`;
            } else {
                document.getElementById('quantizer_result').textContent = 'Please enter a valid number';
            }
        }

        function calculate_Sencoder_result() {
            const comp_rate = parseFloat(document.getElementById('compression_rate').value);
            if (!isNaN(comp_rate)) {
                const num_of_bits = parseFloat(document.getElementById('num_of_bits').value); // Fetch num_of_bits here
                const input_rate = sampling_freq * num_of_bits; // Use sampling_freq from broader scope
                output_rate = input_rate * comp_rate;
                document.getElementById('Sencoder_result').textContent = `bit rate at output of source encoder: ${output_rate}Kbs`;
            } else {
                document.getElementById('Sencoder_result').textContent = 'Please enter a valid number';
            }
        }
        function calculate_Cencoder_result() {
            const Cencoder_rate = parseFloat(document.getElementById('Cencoder_rate').value);
            if (!isNaN(Cencoder_rate)) {
                outputC_bit_rate = output_rate / Cencoder_rate;
                document.getElementById('Cencoder_result').textContent = `bit rate at output of channel encoder: ${outputC_bit_rate}kbs`;
            } else {
                document.getElementById('Cencoder_result').textContent = 'Please enter a valid number';
            }
        }

        function calculate_resource_element() {
            const QAM = parseFloat(document.getElementById('QAM').value);
            if (Number.isInteger(QAM)) {
                const num_of_bits= Math.log2(QAM);
                let res= Math.round(num_of_bits);
                document.getElementById('resource_result').textContent = `number of bits per resource element: ${res} bits/resource element`;
            } else {
                document.getElementById('resource_result').textContent = 'Please enter a valid number';
            }
        }

        function calculate_OFDM_symbol() {
            const bwInput = document.getElementById('OFDM_bandwidth');
            const subCarrierInput = document.getElementById('subCarrier');
            const unitValue = document.getElementById('2').value;

            // Trim whitespace from input values and parse as floats
            const bw = parseFloat(bwInput.value.trim());
            const subCarrier_spacing = parseFloat(subCarrierInput.value.trim());

            // Check if input values are valid numbers and unitValue is not empty
            if (!isNaN(bw) && !isNaN(subCarrier_spacing)) {
                OFDM_num_bit_symbol = 10 * bw / subCarrier_spacing;
                document.getElementById('OFDM_symbol_result').textContent = `number of bits per OFDM symbol: ${OFDM_num_bit_symbol}${unitValue} bit/OFDM symbol`;
            } else {
                document.getElementById('OFDM_symbol_result').textContent = 'Please enter a valid number';
            }
        }
        function calculate_OFDM_resource_block() {
            const num_of_symbol = parseFloat(document.getElementById('num_of_symbol').value);
            const unitValue = document.getElementById('2').value;
            OFDM_num_bit_symbol=convertfreq(OFDM_num_bit_symbol,unitValue);
            if (Number.isInteger(num_of_symbol)) {
                num_of_bits_block =num_of_symbol*OFDM_num_bit_symbol;
                document.getElementById('OFDM_block_result').textContent = `number of bits per OFDM resource block: ${num_of_bits_block} bit/resource block`;
            } else {
                document.getElementById('OFDM_block_result').textContent = 'Please enter a valid number';
            }
        }


        function calculate_max_trans_rate() {
            const num_of_blocks = parseFloat(document.getElementById('num_of_blocks').value);
            const block_duration = parseFloat(document.getElementById('block_duration').value);
            if (Number.isInteger(num_of_blocks)) {
                const max_trans_rate =num_of_blocks*num_of_bits_block/block_duration;
                document.getElementById('Max_trans_rate_result').textContent = `user maximum transmission rate: ${max_trans_rate} bit/second`;
            } else {
                document.getElementById('Max_trans_rate_result').textContent = 'Please enter a valid number';
            }
        }
        function convertfreq(value, unit) {
            switch (unit) {
                case 'Hz':
                    return value; // Already in Hz
                case 'KHz':
                    return value * 1000; // Convert KHz to Hz
                case 'MHz':
                    return value * 1000000; // Convert MHz to Hz
                default:
                    return value; // Default case (should not happen if the units are controlled)
            }
        }
        function convertdistance(value, unit) {
            switch (unit) {
                case 'cm':
                    return value / 100; 
                case 'km':
                    return value * 1000; 
                default:
                    return value; 
            }
        }

        function converttemp(value, unit) {
            switch (unit) {
                case 'c':
                    value = value + 273.15;
                    return value ; 
                case 'f':
                    value= (value - 273.15) * 9/5 + 32;
                    return value; 
                default:
                    return value; // Default case (should not happen if the units are controlled)
            } 
        }  
        function convertdB(value, unit) {
            switch (unit) {
                case 'nu':
                    value = 10 * Math.log10(value);
                    return value ; 
                case 'dBm':
                    value= value - 30;
                default:
                    return value; // Default case (should not happen if the units are controlled)
        }
    }
        function openTab(evt, tabName) {
            // Hide all elements with class="tab-content" by setting display to none
            var tabcontent = document.getElementsByClassName("tab-content");
            for (var i = 0; i < tabcontent.length; i++) {
                tabcontent[i].style.display = "none";
            }
            
            // Remove the class "active" from all elements with class="tab-button"
            var tabbuttons = document.getElementsByClassName("tab-button");
            for (var i = 0; i < tabbuttons.length; i++) {
                tabbuttons[i].className = tabbuttons[i].className.replace(" active", "");
            }

            // Show the current tab, and add an "active" class to the button that opened the tab
            document.getElementById(tabName).style.display = "block";
            evt.currentTarget.className += " active";
        }

        document.addEventListener("DOMContentLoaded", function() {
        document.getElementById("defaultOpen").click(); // Simulate a click on the Basic tab
    });

        const modulationSchemes = {
    '8_PSK': [
        { EbNo: 0, BER: 0.25 },
        { EbNo: 1, BER: 0.23 },
        { EbNo: 2, BER: 0.1 },
        { EbNo: 3, BER: 0.08 },
        { EbNo: 4, BER: 0.06 },
        { EbNo: 5, BER: 0.04 },
        { EbNo: 6, BER: 0.02 },
        { EbNo: 7, BER: 0.01 },
        { EbNo: 8, BER: 0.008 },
        { EbNo: 9, BER: 0.005 },
        { EbNo: 10, BER: 0.001 },
        { EbNo: 11, BER: 0.0003 },
        { EbNo: 12, BER: 0.00008 },
        { EbNo: 13, BER: 0.00001 },
        { EbNo: 14, BER: 0.000001 },
        { EbNo: 15, BER: 0.00000005 }
    ],
    '16_PSK': [
        { EbNo: 0, BER: 0.45 },
        { EbNo: 1, BER: 0.4 },
        { EbNo: 2, BER: 0.35 },
        { EbNo: 3, BER: 0.3 },
        { EbNo: 4, BER: 0.25 },
        { EbNo: 5, BER: 0.2 },
        { EbNo: 6, BER: 0.15 },
        { EbNo: 7, BER: 0.1 },
        { EbNo: 8, BER: 0.07 },
        { EbNo: 9, BER: 0.05 },
        { EbNo: 10, BER: 0.03 },
        { EbNo: 11, BER: 0.01 },
        { EbNo: 12, BER: 0.009 },
        { EbNo: 13, BER: 0.005 },
        { EbNo: 14, BER: 0.001 },
        { EbNo: 15, BER: 0.0003 },
        { EbNo: 16, BER: 0.0001 },
        { EbNo: 17, BER: 0.00004 },
        { EbNo: 18, BER: 0.000003 }
    ],
    'BPSK/QPSK': [
        { EbNo: 0, BER: 0.1 },
        { EbNo: 1, BER: 0.08 },
        { EbNo: 2, BER: 0.06 },
        { EbNo: 3, BER: 0.04 },
        { EbNo: 4, BER: 0.01 },
        { EbNo: 5, BER: 0.008 },
        { EbNo: 6, BER: 0.004 },
        { EbNo: 7, BER: 0.001 },
        { EbNo: 8, BER: 0.0002 },
        { EbNo: 9, BER: 0.00003 },
        { EbNo: 10, BER: 0.000003 },
        { EbNo: 11, BER: 0.0000004 },
        { EbNo: 12, BER: 0.00000001 }
    ]
};


function calculate_receiver_power() {
            const getInputValue = (id) => parseFloat(document.getElementById(id).value);
            const getUnitValue = (id) => document.getElementById(id).value;

            const lp = getInputValue('lp');
            const lpUnit = getUnitValue('unit1');
            const freq = getInputValue('freq');
            const freqUnit = getUnitValue('1');
            const gt = getInputValue('gt');
            const gtUnit = getUnitValue('unit2');
            const gr = getInputValue('gr');
            const grUnit = getUnitValue('unit3');
            const R = getInputValue('r');
            const RUnit= getInputValue('dataR_unit');
            const lf = getInputValue('lf');
            const lfUnit = getUnitValue('unit4');
            const lo = getInputValue('lo');
            const loUnit = getUnitValue('unit5');
            const lf_margin = getInputValue('lf_margin');
            const lf_marginUnit = getUnitValue('unit6');
            const ar = getInputValue('ar');
            const arUnit = getUnitValue('unit7');
            const noisef = getInputValue('ns_total');
            const noisefUnit = getUnitValue('unit8');
            const margin = getInputValue('M');
            const marginUnit = getUnitValue('unit9');
            const userBER = getInputValue('BER');
            const temp= getInputValue('ns_tem');
            const tempUnit = getUnitValue('temp');
            const modulationType = document.querySelector('input[name="OS"]:checked').value;

            if (!isNaN(lp) && !isNaN(freq) && !isNaN(gt) && !isNaN(gr) && !isNaN(R) && !isNaN(lf) && !isNaN(lo) && !isNaN(lf_margin) && !isNaN(ar) && !isNaN(noisef) && !isNaN(margin)) {
                const convertedMargin = convertdB(margin, marginUnit);
                const convertedNoisef = convertdB(noisef, noisefUnit);

                const converted_lf = convertdB(lf, lfUnit);
                const converted_lo= convertdB(lo, loUnit);
                const converted_lp = convertdB(lp, lpUnit);
                const converted_gt= convertdB(gt, grUnit);
                const converted_gr = convertdB(gr, grUnit);
                const converted_lf_margin= convertdB(lf_margin, lf_marginUnit);
                const converted_ar = convertdB(ar, arUnit);
                const converted_temp = convertdB(temp, tempUnit);
                const converted_R = convertdB(R, RUnit);
                const modulationData = modulationSchemes[modulationType];
                const foundData = modulationData.find(item => item.BER === userBER);

                if (foundData) {
                    const EbNo = foundData.EbNo;
                    const Pr = convertedMargin - 228.6 + convertedNoisef + converted_R + EbNo + converted_temp;
                    const Pt= Pr + converted_lp + converted_lf + converted_lo + converted_lf_margin -converted_gt - converted_gr - converted_ar;
                    document.getElementById('power_result').textContent = `power at reciver end: ${Pr} dB watt and power at transmitter end: ${Pt} dB watt`;
                } else {
                    document.getElementById('power_result').textContent = 'BER value not found in the selected modulation scheme';
                }
            } else {
                document.getElementById('power_result').textContent = 'Please enter a valid number';
            }
        }
    
        function solve()
        {
               let Pr = document.getElementById("Rsensitivity").value
               let Pnode = document.getElementById("P/dnode").value
               Pnode /= 10
               Pnode = Math.pow(10,Pnode)
               let dnode = document.getElementById("dnode").value
               let n = document.getElementById("n").value
               let Aans = Math.pow(10,-6)
               Aans = Pr * Aans
               Aans /= Pnode
               Aans = Math.pow(Aans, (1/n))
               Aans = dnode/Aans
               document.getElementById("A").innerText = 
               "Maximum distance between transmitter and receiver for reliable communication = " + Aans

               let Bans = Math.pow(3,(1/2))
               Bans *= (3/2)
               Aans = Math.pow(Aans,2)
               Bans *= Aans 
               document.getElementById("B").innerText = 
               "Maximum cell size assuming hexagonal cells = " + Bans

               let CityA = document.getElementById("cityA").value
               CityA *= Math.pow(10,6)
               let Cans = CityA/Bans
               Cans = Math.round(Cans)
               document.getElementById("C").innerText = 
               "The number of cells in the service area = " + Cans

               let H = document.getElementById("H").value
               let limda = document.getElementById("limda").value
               let user = document.getElementById("subscribers").value 
               let Dans = (H*limda/(24*60))
               Dans *= user
               document.getElementById("D").innerText = 
               "Traffic load in the whole cellular system in Erlangs = " + Dans
                const trafic_load_each_cell= Dans/Cans; 
                document.getElementById("E").innerText = 
               "Traffic load in each cell in Erlangs = " + trafic_load_each_cell
               let SIR = document.getElementById("SIR").value
                if (isNaN(SIR) || isNaN(n)) {
                    alert("Please enter valid numeric values for SIR and n.");
                    return;
                }

                let result = findNandValues(SIR, n);
                let num_cell_cluster=0;
                if (result) {
                    num_cell_cluster = result.N;
                    document.getElementById("F").innerText = "Number of cells in each cluster = " + num_cell_cluster;
                } else {
                    document.getElementById("F").innerText = "No valid N found that satisfies the equations.";
                }
                
            
                let gos=parseFloat(document.getElementById("PdropcallL").value);
                let time_slot_per_carrier = parseFloat(document.getElementById("time/carrier").value);
                const channels = getNumberOfChannels(gos, time_slot_per_carrier);
                let minCarriers=channels/time_slot_per_carrier;
                document.getElementById("G").innerText = minCarriers;
            }

        function findNandValues(SIR, n) {
            let maxN = Math.pow((SIR * 6), 2 / n) / 3;
            let roundedN = Math.ceil(maxN); // Round up to the nearest integer

            function isValidN(N) {
                for (let i = 0; i <= Math.sqrt(N); i++) {
                    for (let j = 0; j <= Math.sqrt(N); j++) {
                        if (i * i + i * j + j * j === N) {
                            return { N, i, j };
                        }
                    }
                }
                return null;
                }

                let result = isValidN(roundedN);
                if (result) {
                    return result;
                }

                for (let offset = 1; offset <= roundedN; offset++) {
                    result = isValidN(roundedN + offset);
                    if (result) {
                        return result;
                    }
                }

                return null;
        }

        function calculate_throughput() {
            let Tfram = 0, G = 0, lamda = 0, sth = 0;
            const transmissionRate = parseFloat(document.getElementById('trans_rate').value);
            const frame_size = parseFloat(document.getElementById('f_size').value);
            const frame_rate = parseFloat(document.getElementById('g_framerate').value);
            const signal_progation = parseFloat(document.getElementById('signal_prog').value);

            if (!isNaN(transmissionRate) && !isNaN(frame_size) && !isNaN(frame_rate) && !isNaN(signal_progation)) {
                Tfram = frame_size / transmissionRate; // Time for one frame in seconds
                G = frame_rate * Tfram; // Original calculation of G
                lamda = signal_progation/Tfram;
                // Cap G to prevent too large values causing underflow in Math.exp
                const cappedG = Math.min(G, 20); // Cap G to a maximum of 20

                const selectedTechnique = document.querySelector('input[name="Access_techn"]:checked');
                if (!selectedTechnique) {
                    document.getElementById('throughput_result').textContent = 'Please select an access technique';
                    return;
                }
                const Acces_technique = selectedTechnique.value;

                switch (Acces_technique) {
                    case 'pure_aloha':
                        sth = G * Math.exp(-2 * G);
                        break;
                    case 'slotted_aloha':
                        sth = G * Math.exp(-G);
                        break;
                    case 'uns_nonp_CSMA':
                        sth = (G * Math.exp(-2*lamda * Tfram))/((G + 2*G*lamda)+ Math.exp(-2*lamda*G)); // Assuming lamda uses Tfram directly
                        break;
                    default:
                        document.getElementById('throughput_result').textContent = 'Invalid access technique selected';
                        return;
                }

                document.getElementById('throughput_result').textContent = `The throughput for ${Acces_technique} = ${sth.toFixed(4)}`;
            } else {
                document.getElementById('throughput_result').textContent = 'Please enter valid numbers in all fields';
            }
        }


        //Minimum number of carriers needed (in the whole system) to achieve the required Quality of Service:
        
        
        function getNumberOfChannels(gos, errorRate) {
            const table = [
                // Channels 0.1% 0.2% 0.5% 1% 1.2% 1.3% 1.5% 2% 3% 5% 7% 10% 15% 20% 30%
                [0,0.001,0.002,0.005,0.01,0.012,0.013,0.015,0.02,0.03,0.05,0.07,0.1,0.15,0.2,0.3],
                [1, 0.001, 0.002, 0.005, 0.010, 0.012, 0.013, 0.02, 0.020, 0.031, 0.053, 0.075, 0.111, 0.176, 0.250, 0.429],
                [2, 0.046, 0.065, 0.105, 0.153, 0.168, 0.176, 0.19, 0.223, 0.282, 0.381, 0.470, 0.595, 0.796, 1.00, 1.45],
                [3, 0.194, 0.249, 0.349, 0.455, 0.489, 0.505, 0.53, 0.602, 0.715, 0.899, 1.057, 1.271, 1.602, 1.930, 2.633],
                [4, 0.439, 0.535, 0.701, 0.869, 0.922, 0.946, 0.99, 1.092, 1.259, 1.525, 1.748, 2.045, 2.501, 2.95, 3.89],
                [5, 0.762, 0.900, 1.132, 1.361, 1.431, 1.464, 1.52, 1.657, 1.875, 2.218, 2.504, 2.881, 3.454, 4.010, 5.189],
                [6, 1.1, 1.3, 1.6, 1.9, 2.0, 2.0, 2.1, 2.3, 2.5, 3.0, 3.3, 3.8, 4.4, 5.1, 6.5],
                [7, 1.6, 1.8, 2.2, 2.5, 2.6, 2.7, 2.7, 2.9, 3.2, 3.7, 4.1, 4.7, 5.5, 6.2, 7.9],
                [8, 2.1, 2.3, 2.7, 3.1, 3.2, 3.3, 3.4, 3.6, 4.0, 4.5, 5.0, 5.6, 6.5, 7.4, 9.2],
                [9, 2.6, 2.9, 3.3, 3.8, 3.9, 4.0, 4.1, 4.3, 4.7, 5.4, 5.9, 6.5, 7.6, 8.5, 10.6],
                [10, 3.1, 3.4, 4.0, 4.5, 4.6, 4.7, 4.8, 5.1, 5.5, 6.2, 6.8, 7.5, 8.6, 9.7, 12.0],
                [11, 3.7, 4.0, 4.6, 5.2, 5.3, 5.4, 5.5, 5.8, 6.3, 7.1, 7.7, 8.5, 9.7, 10.9, 13.3],
                [12, 4.2, 4.6, 5.3, 5.9, 6.1, 6.1, 6.3, 6.6, 7.1, 8.0, 8.6, 9.5, 10.8, 12.0, 14.7],
                [13, 4.8, 5.3, 6.0, 6.6, 6.8, 6.9, 7.0, 7.4, 8.0, 8.8, 9.5, 10.5, 11.9, 13.2, 16.1],
                [14, 5.4, 5.9, 6.7, 7.4, 7.6, 7.7, 7.8, 8.2, 8.8, 9.7, 10.5, 11.5, 13.0, 14.4, 17.5],
                [15, 6.1, 6.6, 7.4, 8.1, 8.3, 8.4, 8.6, 9.0, 9.6, 10.6, 11.4, 12.5, 14.1, 15.6, 18.9],
                [16, 6.7, 7.3, 8.1, 8.9, 9.1, 9.2, 9.4, 9.8, 10.5, 11.5, 12.4, 13.5, 15.2, 16.8, 20.3],
                [17, 7.4, 7.9, 8.8, 9.7, 9.9, 10.0, 10.2, 10.7, 11.4, 12.5, 13.4, 14.5, 16.3, 18.0, 21.7],
                [18, 8.0, 8.6, 9.6, 10.4, 10.7, 10.8, 11.0, 11.5, 12.2, 13.4, 14.3, 15.5, 17.4, 19.2, 23.1],
                [19, 8.7, 9.4, 10.3, 11.2, 11.5, 11.6, 11.8, 12.3, 13.1, 14.3, 15.3, 16.6, 18.5, 20.4, 24.5],
                [20, 9.4, 10.1, 11.1, 12.0, 12.3, 12.4, 12.6, 13.2, 14.0, 15.2, 16.3, 17.6, 19.6, 21.6, 25.9]
            ];

            for (let i = 0; i < table.length; i++) {
                if (table[0][i] === gos) {
                    for (let j = 1; j < table[i].length; j++) {
                        if (table[j][i] === errorRate) {
                            return table[j][0]; 
                        }
                    }
                }
            }
            return null;
        }



    </script>
</body>
</html>